<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Panel Rekru Team</title>

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:'Segoe UI',sans-serif;}
body{
    background:linear-gradient(135deg,#0f172a,#020617);
    color:white;
    min-height:100vh;
}
.admin-btn{
    position:fixed;
    top:20px;
    right:20px;
    background:#facc15;
    border:none;
    padding:12px 22px;
    border-radius:30px;
    font-weight:bold;
    cursor:pointer;
    box-shadow:0 0 20px rgba(250,204,21,.6);
    transition:.3s;
    z-index:5;
}
.admin-btn:hover{transform:scale(1.08);}
h1{text-align:center;margin-top:80px;font-size:48px;}

.stats-container{
    display:flex;
    justify-content:center;
    gap:50px;
    margin-top:80px;
}
.stat-card{
    background:rgba(255,255,255,.05);
    padding:60px 80px;
    border-radius:25px;
    backdrop-filter:blur(15px);
    text-align:center;
    box-shadow:0 0 40px rgba(0,255,255,.15);
    transition:.4s;
}
.stat-card:hover{transform:translateY(-10px) scale(1.03);}
.stat-card span{font-size:60px;color:#22d3ee;font-weight:bold;}

.admin-modal{
    position:fixed;
    inset:0;
    background:rgba(0,0,0,.75);
    backdrop-filter:blur(8px);
    display:none;
    justify-content:center;
    align-items:center;
    z-index:9999;
}
.admin-modal.active{display:flex;}

.modal-box{
    background:rgba(30,41,59,.95);
    padding:40px;
    border-radius:20px;
    width:420px;
    max-height:90vh;
    overflow-y:auto;
    box-shadow:0 0 40px rgba(0,255,255,.3);
    animation:scaleIn .3s ease;
}

.modal-box input,select{
    width:100%;
    padding:10px;
    margin:8px 0;
    border-radius:10px;
    border:none;
    background:#1e293b;
    color:white;
}

.modal-box button{
    width:100%;
    padding:10px;
    margin-top:8px;
    border-radius:10px;
    border:none;
    background:#22c55e;
    color:white;
    font-weight:bold;
    cursor:pointer;
    transition:.3s;
}
.modal-box button:hover{transform:scale(1.05);}
.delete-btn{
    background:#ef4444 !important;
}

@keyframes scaleIn{
    from{opacity:0;transform:scale(.8);}
    to{opacity:1;transform:scale(1);}
}
</style>
</head>
<body>

<button class="admin-btn" onclick="openLogin()">⚙️ Panel Admin</button>

<h1>PANEL REKRU TEAM</h1>

<div class="stats-container">
    <div class="stat-card">
        <h2>Liczba Mentorów</h2>
        <span id="mentorCount">0</span>
    </div>
    <div class="stat-card">
        <h2>Liczba Podopiecznych</h2>
        <span id="studentCount">0</span>
    </div>
</div>

<!-- LOGIN MODAL -->
<div class="admin-modal" id="loginModal">
    <div class="modal-box">
        <h2>Logowanie Admina</h2>
        <input type="password" id="adminPass" placeholder="Hasło">
        <button onclick="login()">Zaloguj</button>
    </div>
</div>

<!-- ADMIN PANEL -->
<div class="admin-modal" id="adminModal">
    <div class="modal-box">
        <h2>Panel Administracyjny</h2>

        <h3>Dodaj Mentora</h3>
        <input type="text" id="mentorUID" placeholder="UID Mentora">
        <input type="text" id="mentorName" placeholder="Imię i Nazwisko">
        <button onclick="addMentor()">Dodaj</button>

        <h3 style="margin-top:20px;">Usuń Mentora</h3>
        <select id="mentorDeleteSelect"></select>
        <button class="delete-btn" onclick="deleteMentor()">Usuń Mentora</button>

        <hr style="margin:20px 0;opacity:.2;">

        <h3>Dodaj Podopiecznego</h3>
        <input type="text" id="studentUID" placeholder="UID Podopiecznego">
        <input type="text" id="studentName" placeholder="Imię i Nazwisko">
        <select id="mentorSelect"></select>
        <button onclick="addStudent()">Dodaj</button>

        <h3 style="margin-top:20px;">Usuń Podopiecznego</h3>
        <select id="studentDeleteSelect"></select>
        <button class="delete-btn" onclick="deleteStudent()">Usuń Podopiecznego</button>

        <button onclick="closeAdmin()" style="margin-top:25px;background:#64748b;">Zamknij</button>
    </div>
</div>

<script>
const ADMIN_PASSWORD = "rekru123";

let mentors = JSON.parse(localStorage.getItem("mentors")) || [];
let students = JSON.parse(localStorage.getItem("students")) || [];

/* USUWA alvaro caruso jeśli istnieje */
mentors = mentors.filter(m => m.name.toLowerCase() !== "alvaro caruso");
students = students.filter(s => {
    let mentor = mentors.find(m => m.uid === s.mentorUID);
    return mentor !== undefined;
});
saveData();

function saveData(){
    localStorage.setItem("mentors",JSON.stringify(mentors));
    localStorage.setItem("students",JSON.stringify(students));
}

function updateCounts(){
    mentorCount.textContent = mentors.length;
    studentCount.textContent = students.length;
}

function updateSelects(){
    mentorSelect.innerHTML="";
    mentorDeleteSelect.innerHTML="";
    studentDeleteSelect.innerHTML="";

    mentors.forEach(m=>{
        let opt1=new Option(m.name+" ("+m.uid+")",m.uid);
        let opt2=new Option(m.name+" ("+m.uid+")",m.uid);
        mentorSelect.add(opt1);
        mentorDeleteSelect.add(opt2);
    });

    students.forEach(s=>{
        let opt=new Option(s.name+" ("+s.uid+")",s.uid);
        studentDeleteSelect.add(opt);
    });
}

function addMentor(){
    let uid=mentorUID.value;
    let name=mentorName.value;
    if(!uid||!name)return alert("Uzupełnij dane");
    mentors.push({uid,name});
    saveData();updateCounts();updateSelects();
}

function deleteMentor(){
    let uid=mentorDeleteSelect.value;
    mentors=mentors.filter(m=>m.uid!==uid);
    students=students.filter(s=>s.mentorUID!==uid);
    saveData();updateCounts();updateSelects();
}

function addStudent(){
    let uid=studentUID.value;
    let name=studentName.value;
    let mentorUID=mentorSelect.value;
    if(!uid||!name)return alert("Uzupełnij dane");
    students.push({uid,name,mentorUID});
    saveData();updateCounts();updateSelects();
}

function deleteStudent(){
    let uid=studentDeleteSelect.value;
    students=students.filter(s=>s.uid!==uid);
    saveData();updateCounts();updateSelects();
}

function openLogin(){
    loginModal.classList.add("active");
    document.body.style.overflow="hidden";
}
function login(){
    if(adminPass.value===ADMIN_PASSWORD){
        loginModal.classList.remove("active");
        adminModal.classList.add("active");
    }else alert("Złe hasło!");
}
function closeAdmin(){
    adminModal.classList.remove("active");
    document.body.style.overflow="auto";
}

updateCounts();
updateSelects();
</script>

</body>
</html>
